{% extends "base.html" %}
{% block content %}
<section class="card">
  <h2>Create a short link</h2>
  <form method="post" action="/shorten">
    <label for="url">Long URL</label>
    <input id="url" name="url" type="url" placeholder="https://example.com/some/long/path" required>
    <button type="submit">Shorten</button>
  </form>
  {% if short_url %}
  <div class="result">
    <p>Short link:</p>
    <p>
      <a class="short-link" href="{{ href }}" target="_blank" rel="noopener">
        {{ short_url }}
      </a>
    </p>
    <small class="muted">
      Deployed at: {{ deployed_at }}{% if git_sha %} ({{ git_sha[:7] }}){% endif %}
    </small>
  </div>
{% endif %}
</section>

<section class="card">
  <h3>Recent links</h3>
  {% if rows %}
    <ul class="list">
      {% for r in rows %}
        <li><code>{{ request.host_url }}{{ r.code }}</code> → {{ r.url }}</li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="muted">No links yet—create one above.</p>
  {% endif %}
</section>
{% endblock %}